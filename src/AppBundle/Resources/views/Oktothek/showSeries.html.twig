{% extends "BprsStyleBundle::layout.html.twig" %}

{% block nav_head%}
    {% include 'BprsStyleBundle::menu.html.twig' with {'selected': 'oktothek', 'dropdown': ''} %}
{% endblock %}

{% set body_class = "series head-white-color head-transparent-bg fullscreen-images" %}
{% block body %}
    <section class="series-content">
        <div class="series-ident">
            <figure class="episode-posterframe">
                <a href="{{ path('oktothek_show_episode', {'uniqID': series.episodes[0].uniqID})}}" title="Zur Episode"><img src="{{ series.posterframe|path() }}" /></a>
            </figure>
			<div class="current-episode container">
			    <div class="bg-opacity"></div>
			    <div class="content-opacity">
					<h2>Episodentitel<br>die aktuelle Folge</h2>
					<p class="description">Künstlerisch, schräg und nerdig wird es diesmal bei New Ordner. Gezeigt werden Links zu folgenden Themen: Noisli | Star Trek Apartment | Web GL Path Tracing | Online Ray Tracer | Augmented Reality Sandbox | Anatomically Correct Art | Cyborg Artist | Goldpillen | Cry My IP </p>
				</div>
			</div>
		</div>
    </section>
	<section class="container series-description">
		<!-- Start Serienbeschreibung -->
		<header><h1 id="button_down">{{ series.name }} <span class="glyphicon glyphicon-chevron-down"> </span></h1></header>
		<article>
				        <p class="description">{{ series.description }}</p>
						<p class="misc">
                        <button type="button" class="btn btn-default" data-toggle="collapse" data-target="#collapseShare" aria-expanded="false" aria-controls="collapseShare" id="ButtonShare" data-uniqID="#" title="... teilen">Teilen</button> <button type="button" class="btn btn-default" title="... abbonieren">Abbonieren</button><!-- <button type="button" class="btn btn-default active" title="... abbonieren">Abboniert</button>-->
                </p>
				<!-- Start Collapse Share-->
				<div class="collapse" id="collapseShare">
                    <div>
                        <h3>Teilen</h3>
						<div>
						    <div class="btn-group sharingnav">
						        <button type="button" class="btn btn-default active" data-toggle="tab" id="share_sn">Teilen</button>
					        </div>
						</div>
						<div class="tab-content">
						    <div role="tabpanel" class="tab-pane active" id="div_share_sn">
						        <div>
						        <ul class="socialnetworks">
                                    <li><a href="https://www.facebook.com/okto.tv" class="icon-facebook" target="_blank" title="Okto auf Facebook"><span>Facebook</span></a></li>
                                    <li><a href="https://twitter.com/oktotv" class="icon-twitter" target="_blank" title="Okto auf Twitter"><span>Twitter</span></a></li>
                                    <li><a href="https://plus.google.com/+CommunityTVGmbHWien" class="icon-googleplus" target="_blank" title="Okto auf Google Plus"><span>Google Plus</span></a></li>
                                    <li><a href="#" class="icon-instagramm" target="_blank" title="Okto auf Instagramm"><span>Instagramm</span></a></li>
                                    <li><a href="#" class="icon-pinterest" target="_blank" title="Okto auf Pinterest"><span>Pinterest</span></a></li>
                                    <li><a href="https://www.youtube.com/user/oktotv" class="icon-youtube" target="_blank" title="Okto auf YouTube"><span>YouTube</span></a></li>
                                </ul>
							    <button type="button" class="btn btn-default" data-toggle="tab" id="share_email">Email</button>
							</div>
						    <form><input type="text" value="" class="form-control" id="sharingurl"></form>
						</div>
						</div>
                    </div>
                </div>
				<!-- End Modal Window Share-->
				    </article>
				    <aside>
				        <figure class="series-posterframe">
                            <img src="{{ series.posterframe|path() }}" />
                        </figure>
				        <ul>
				            <li><strong>Produzent:</strong> Osama Saadalah</li>
					        <li><strong>Ressigeur:</strong> Osama Saadalah</li>
					        <li><strong>Kontakt:</strong> ossa@gmx.at</li>
				        </ul>
				        <div class="socialnetworks">
                            <ul>
                                <li><a href="#" class="icon-facebook" target="_blank" title="Okto auf Facebook"><span>Facebook</span></a></li>
                                <li><a href="#" class="icon-twitter" target="_blank" title="Okto auf Twitter"><span>Twitter</span></a></li>
                            </ul>
                        </div>
				    </aside>
		<!-- Ende Serienbeschreibung -->
	</section>
	<section class="container more-clips">
	    <h2>{{ 'oktothek.more_from_this_series'|trans }}</h2>
	    <select class="form-control">
            <option>Alle Folgen</option>
            <option>Krieg</option>
            <option>Freiheit</option>
            <option>Arabisch</option>
            <option>Kulturen</option>
            <option>Syrien</option>
            <option>Demonstration</option>
            <option>Andere Sprachen</option>
            <option>Zivilgesellschaft</option>
        </select>
        {% include 'AppBundle::Default/EpisodeStack.html.twig' with {'episodes': series.episodes} %}
	</section>
    {% include 'AppBundle::Default/Series/blog.html.twig' with {'posts': series.posts, 'uniqID': series.uniqID } %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/bprsstyle/js/typeahead.js') }}"></script>
    {% include "BprsStyleBundle::datetimepicker.js.twig" %}
    <script type="text/javascript">
        $(document).ready( function(){
            $('#appbundle_post_onlineAt_picker').datetimepicker({
                locale: 'de',
                // format: "DD.MM.YYYY hh:mm",
                useCurrent: true,
                calendarWeeks: true,
                allowInputToggle: true,
                showTodayButton: true
            });

            $(".character500").characterCounter({
                counterCssClass: 'help-block',
                limit: 400
            });

            // tags
            var addInput = function(list, text) {
                var tag = "<span class='label label-default remove'>"+text+"</span>";
                tag = $(tag);
                prototype = list.attr('data-prototype');
                var length = list.find(':input').length;
                prototype = prototype.replace(/__name__/g, length);
                prototype = $(prototype);
                prototype.attr({value: text, type: 'hidden'});
                tag.append(prototype);
                list.append(tag);
            };

            var tags = new Bloodhound({
                datumTokenizer: Bloodhound.tokenizers.whitespace,
                queryTokenizer: Bloodhound.tokenizers.whitespace,
                prefetch:   $('.tag-input').attr('data-url')
            });

            $('.tag-input').typeahead(null, {
                name: 'tags',
                source: tags
            }).bind('typeahead:select', function(ev, suggestion) {
                // console.log('Selection: ' + suggestion);
                var list = $(this).parents('.form-group').children('.tags');
                addInput(list, suggestion);
            });

            $('.tag-input').keydown(function(e){
                if(e.keyCode == 13) {
                    e.preventDefault();
                    var list = $(this).parents('.form-group').children('.tags');
                    var text = $(this).val();
                    $.ajax({
                        url: $(this).attr('data-url'),
                        data: {
                            'action': "add",
                            'text':   text,
                        },
                        type: 'POST',
                        success: function(data) {
                            addInput(list, text);
                            $(this).val('');
                        }
                    });
                }
            });
            // end tags
        });
        $(document).on('click', '.remove', function(e){
            $(this).remove();
        });
    </script>
    {% include "BprsAssetBundle::singleUpload.js.twig" %}
    <script src="{{ asset('bundles/bprsstyle/js/charactercounter.js')}}"></script>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('bundles/bprsstyle/css/datetimepicker.min.css') }}" rel="stylesheet" />
    {% include "BprsAssetBundle::singleUpload.css.twig" %}
{% endblock %}
