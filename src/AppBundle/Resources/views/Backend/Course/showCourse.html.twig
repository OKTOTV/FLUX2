{% extends "BprsStyleBundle::layout.html.twig" %}

{% block nav_head%}
    {% include 'BprsStyleBundle::menu.html.twig' with {'selected': 'oktothek_backend', 'dropdown': ''} %}
{% endblock %}
{% block body_main %}
    <div class="page-header">
        <h1>{{ course.coursetype }}</h1>
        <!-- Single button -->
        <div class="btn-group">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            {{ 'oktothek_backend_show_course_dropdown'|trans|raw }}
          </button>
          <ul class="dropdown-menu">
              <li>
                  <a href="{{ path('oktothek_backend_show_coursetype', {'coursetype': course.coursetype.id})}}">
                      {{'oktothek_backend_show_course_back_to_type'|trans|raw }}
                  </a>
              </li>
              <li>
                  <a href="{{ path('oktothek_backend_edit_course', {'course': course.id})}}">
                      {{ 'oktothek_backend_edit_course'|trans|raw }}
                  </a>
              </li>
              <li>
                  <a href="{{ path('oktothek_backend_create_attendee', {'course': course.id})}}">
                      {{ 'oktothek_backend_show_course_create_attendee'|trans|raw }}
                  </a>
              </li>
          </ul>
        </div>

    </div>

    <ul class="list-group">
        <li class="list-group-item">{{ course.trainer }}</li>
        <li class="list-group-item">{{ course.coursetype }}</li>
        <li class="list-group-item">{{ 'oktothek.backend_course_maxAttendees'|trans({'%count%': course.maxAttendees}) }}</li>
        <li class="list-group-item">{{ 'oktothek.backend_course_attendees'|trans({'%count%': course.attendees|length}) }}</li>
    </ul>
    <table class="table table-bordered">
        <thead>
            <tr><th>Von</th><th>Bis</th></tr>
        </thead>
        <tbody>
            {% for date in course.dates %}
                <tr>
                    <td>{{ date.courseStart|date('H:i d.m.Y') }}</td>
                    <td>{{ date.courseEnd|date('H:i d.m.Y') }}</td>
                </tr>
            {% endfor %}
        <tbody>
    </table>
    <table class="table table-bordered">
        <thead>
            <tr><th>Teilnehmer</th><th>Status</th></tr>
        </thead>
        <tbody>
            {% for attendee in course.attendees %}
                <tr>
                    <td><a href="{{ path('oktothek_backend_show_attendee', {'attendee': attendee.id })}}">{{ attendee }}</a></td>
                    <td>{{ attendee.paymentStatus|trans }}</td>
                </tr>
            {% endfor %}
            {% if course.attendees is empty %}
                <tr><td colspan="2">Noch keine Teilnehmer</td></tr>
            {% endif %}
        <tbody>
    </table>
{% endblock %}
