<section class="comments body-white-color comment-pager">
    <div class="container">
        <h2>{{ 'oktothek.episode_comment_header'|trans({'%count%': comments.getTotalItemCount })|raw }}</h2>
        <!-- Kommentar -->
        <article class="row">
            <div class="navigation">
              {{ knp_pagination_render(comments) }}
            </div>
            {% for comment in comments %}
            <div class="col-md-11">
                <div class="author">{{ 'oktothek.comment_author'|trans({'%name%': comment.user.username, '%date%': comment.createdAt|date('d.m.Y H:i')})|raw }}</div>
                <div class="comment-text">
                    <p>{{ comment.text|nl2br }}</p>
                </div>
                <!-- Antwort Container -->
                <div class="comment-answer">
                    <a class="answer" role="button" data-toggle="collapse" href="#answer_comment_{{ loop.index }}" aria-expanded="false" aria-controls="answer_comment_{{ loop.index }}">{{ 'oktothek.comment_reply'|trans({'%count%': comment.children|length}) }}</a>
                    <div class="answer-text collapse" id="answer_comment_{{ loop.index }}">
                        <div class="row comment-form">
                            <div class="col-md-11">
                                {{ render(controller('AppBundle:Comment:answerComment', {'comment': comment.Id}))}}
                            </div>
                        </div>
                        <!-- Antwort -->
                        {% for answer in comment.children %}
                            <div class="row">
                                <!--<div class="avatar col-md-1"><img src="/images/default_avatar.png" class="img-responsive" width=50 height=50/></div>-->
                                <div class="col-md-11">
                                    <div class="author">{{ 'oktothek.comment_author'|trans({'%name%': answer.user.username, '%date%': answer.createdAt|date('d.m.Y H:i')})|raw }}</div>
                                    <div class="comment-text">
                                        <p>{{ answer.text|nl2br }}</p>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                        <!-- Ende Antwort -->
                    </div>
                    <!-- Ende Antwort Container -->
                </div>
            </div>
            {% endfor %}
        </article>
        <!-- Ende Kommentar -->
        <div class="row comment-form">
            <div class="col-md-11">
                {{ render(controller('AppBundle:Comment:commentEpisode', {'uniqID': uniqID}))}}
            </div>
        </div>
    </div>
</section>
